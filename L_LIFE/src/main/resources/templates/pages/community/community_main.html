<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>L-Life Community</title>
    <th:block th:replace="common/fragment/commonHead"></th:block>

    <html xmlns:th="http://www.thymeleaf.org">
    <link rel="stylesheet" type="text/css" th:href="@{/css/community/community_main.css}"/>
    <script th:src="@{/js/community/community_main.js}" type="text/javascript"></script>
    <link href="https://fonts.googleapis.com/css?family=Lovers+Quarrel" rel="stylesheet">

<body>

    <!-- 헤더 프래그먼트 삽입 -->
    <th:block th:replace="common/fragment/header/header::headerFragment(0)"></th:block>

    <!-- 서브 헤더 프래그먼트 삽입 -->
    <th:block th:replace="common/fragment/header/sub_header::subHeaderFragment(0)"></th:block>

    <!-- 커뮤니티 배너 부분 -->
    <section class="community_main">
        <div class="community-top-banner">
            <div class="community-main-content hd__inner1400">
                <div class="first-title">💡새로운 업데이트 💡</div>
                <div class="second-title">Livart Life 커뮤니티<br>리뉴얼 스토리</div>
                <div class="third-title">클럽 집테리어와 함께 색다른 공간을 디자인 해보세요</div>
            </div>
            <img class="community-img" alt="리바티스트 메인 사진" th:src="@{https://img-resource.s3.ap-northeast-2.amazonaws.com/livatist/dggdt.png}"/>
        </div>
    </section>

    <!-- 리바티스트 부분 -->
    <section class="livatist-main hd__inner1400">
        <div class="livatist-main-title">
            <span class="first-livatist">새로운</span>
            <span class="second-livatist">리바티스트들</span>
            <span class="third-livatist">과 가구의 새로움을 알아보세요</span>
        </div>
        <div class="livatist-person">
            <a href="https://www.instagram.com/p/Cw1Z17_Jh6_/?img_index=7">
                <img class="livatist" alt="리바티스트 사진1 " th:src="@{https://img-resource.s3.ap-northeast-2.amazonaws.com/livatist/KakaoTalk_20230809_112743260.jpg}"/>
            </a>
            <a href="https://blog.naver.com/PostView.naver?blogId=hd_livart&logNo=220773044948">
                <img class="livatist" alt="리바티스트 사진2 " th:src="@{https://img-resource.s3.ap-northeast-2.amazonaws.com/livatist/%E1%84%87%E1%85%A1%E1%86%A8%E1%84%8C%E1%85%AE%E1%84%8B%E1%85%AF%E1%86%AB.jpeg}"/>
            </a>
            <img class="livatist" alt="리바티스트 사진3 " th:src="@{https://img-resource.s3.ap-northeast-2.amazonaws.com/livatist/%E1%84%89%E1%85%B3%E1%86%BC%E1%84%8C%E1%85%AE.png}"/>
            <img class="livatist" alt="리바티스트 사진4 " th:src="@{https://img-resource.s3.ap-northeast-2.amazonaws.com/livatist/%E1%84%92%E1%85%A9%E1%86%BC%E1%84%89%E1%85%A5%E1%86%A8%E1%84%92%E1%85%A7%E1%86%AB.jpg}"/>
            <img class="livatist" alt="리바티스트 사진5 " th:src="@{https://img-resource.s3.ap-northeast-2.amazonaws.com/livatist/233AA112-BBCE-4E50-8344-329402D14C19_1_105_c.jpeg}"/>
            <img class="livatist" alt="리바티스트 사진6 " th:src="@{https://img-resource.s3.ap-northeast-2.amazonaws.com/livatist/143076A6-9946-4AFC-8602-22D7B801540F_1_105_c.jpeg}"/>
            <img class="livatist" alt="리바티스트 사진7 " th:src="@{https://img-resource.s3.ap-northeast-2.amazonaws.com/livatist/KakaoTalk_Photo_2023-09-18-12-20-43.jpeg}"/>
        </div>
    </section>

    <!-- 메가진 부분 -->
    <section class="styling-main hd__inner1400">
        <div class="styling-main-title">
            <span class="first-styling">함께하는 집테리어들의</span>
            <span class="second-styling">"New Space"</span>
        </div>
        <div class="styling-main-content slider">
            <div class="image-box" th:id="'image-box-'+${iterStat.index}" th:each="book, iterStat : ${books}">
                <input id="bookId" type="hidden" th:value="${book.bookId}">
                <img class="book-image" th:id="'book-image'+ ${iterStat.index}" alt="메가진 사진" th:src="${book.bookMainImg}" th:onclick="showBook([[${iterStat.index}]])"/>
            </div>
        </div>
    </section>

    <!-- 북 -->
    <section class="book-main hd__inner1400">
        <div class="book-main-deco">
            <div class="book-main-title">가구 구독의 모든 순간, <br> 당신만의 플립북에 담아보세요 🛋️✨</div>
            <div class="book-main-subtitle">지금, [플립북 타이틀]의 페이지들 속에서 당신만의 스타일을 발견해보세요.</div>

            <div class="characters">
                <img class="character-1" alt="캐릭터 사진" th:src="@{https://img-resource.s3.ap-northeast-2.amazonaws.com/Character/Character_bigman.png}"/>
                <img class="character-2" alt="캐릭터 사진" th:src="@{https://img-resource.s3.ap-northeast-2.amazonaws.com/Character/character_img9.png}"/>
            </div>
        </div>
        <div class="book">
            <div id="pages" class="pages">
                <div class="page page0"></div>
                <!-- 1번째 페이지 -->
                <div class="page page1-1">
                    <img class="page1-img" th:src="${books.get(0).pages.get(0).bpImg}" />
                </div>
                <div class="page page1-2">
                    <div class="page-title" th:text="${books.get(0).pages.get(0).bpTitle}" ></div>
                    <img class="page-ai-img" th:src="${books.get(0).pages.get(0).bpAiImg}" />
                    <div class="page-ai-content" th:text="${books.get(0).pages.get(0).bpAiContent}" ></div>
                    <div class="page-content" th:text="${books.get(0).pages.get(0).bpContent}" ></div>
                </div>
                <!-- 2번째 페이지 -->
                <div class="page page2-1">
                    <div class="page2-data">
                        <div class="page2-title" th:text="${books.get(0).pages.get(1).bpTitle}" ></div>
                        <div class="page2-content" th:text="${books.get(0).pages.get(1).bpContent}" ></div>
                    </div>
                    <img class="page2-ai-img" th:src="${books.get(0).pages.get(1).bpAiImg}" />
                </div>
                <div class="page page2-2">
                    <img class="page2-img" th:src="${books.get(0).pages.get(1).bpImg}" />
                    <div class="page2-ai-content" th:text="${books.get(0).pages.get(1).bpAiContent}" ></div>
                </div>
                <!-- 3번째 페이지 -->
                <div class="page page3-1">
                    <img class="page3-img" th:src="${books.get(0).pages.get(2).bpImg}" />
                    <div class="page3-title" th:text="${books.get(0).pages.get(2).bpTitle}" ></div>
                    <div class="page3-content" th:text="${books.get(0).pages.get(2).bpContent}" ></div>
                </div>
                <div class="page page3-2">
                    <div class="page3-ai-content" th:text="${books.get(0).pages.get(2).bpAiContent}" ></div>
                    <img class="page3-ai-img" th:src="${books.get(0).pages.get(2).bpAiImg}" />
                </div>
                <!-- 4번째 페이지 -->
                <div class="page page4-1">

                </div>
                <div class="page page4-2">

                </div>
                <div class="page page5"></div>

            </div>
        </div>
    </section>

    <!-- 푸터 프래그먼트 -->
    <th:block th:replace="common/fragment/footer/footer :: footerFragment()"></th:block>


    <script>
        function showBook(bookNum) {
            var findIndex = '#image-box-' + bookNum;
            var bookId = $(findIndex + '> input').val();
            console.log("북아이디" + bookId);

            var data = {
                bookId: bookId
            }

            $.ajax({
                url: '/l-life/api/v1/community/books/' + bookId,
                type: 'GET',
                data: data,
                success: function(response) {
                    console.log(response);
                    $(".page1-img").attr("src", response.result.bookMainImg);
                    $(".page-title").text(response.result.pages[0].bpTitle);
                    $(".page-ai-img").attr("src", response.result.pages[0].bpAiImg);
                    $(".page-ai-content").text(response.result.pages[0].bpAiContent);
                    $(".page-content").text(response.result.pages[0].bpContent);
                },
                error: function(err) {
                    console.log(err);
                }
            });
        }





        var pages = document.getElementsByClassName('page');
        for (var i = 0; i < pages.length; i++) {
            var page = pages[i];
            if (i % 2 === 0) {
                page.style.zIndex = (pages.length - i);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            for (var i = 0; i < pages.length; i++) {
                pages[i].pageNum = i + 1;
                pages[i].onclick = function() {
                    if (this.pageNum % 2 === 0) {
                        this.classList.remove('flipped');
                        this.previousElementSibling.classList.remove('flipped');
                    } else {
                        this.classList.add('flipped');
                        this.nextElementSibling.classList.add('flipped');
                    }
                }
            }

            // 1페이지와 2페이지를 flipped 상태로 만들어 2,3페이지가 바로 보이게 함
            if (pages[0] && pages[1]) {
                pages[0].classList.add('flipped');
                pages[1].classList.add('flipped');
            }
        });
    </script>
</body>
</html>



